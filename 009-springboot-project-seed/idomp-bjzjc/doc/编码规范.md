# 编码规范

新接手一个项目时通常都会感觉到手足无措，一个是因为业务的不熟悉，另一个则是代码不规范，各有各的编码风格。如果一个组织内的各个项目都能够遵循同一种编码风格和规范，无论上手哪个项目都会更加轻松。

## 前言

在这里进行编程思想的

## 接口文档

接口文档到底使用 word、markdown 、knife4j这种类 swagger 的工具还是 rap2 这种在线文档管理工具，有待商讨。

## MySQL数据库

MySQL 是日常系统中使用最广泛的数据库，关于数据库的设计必须要有通用的规范

1. 表达是否概念的字段，必须使用 is_xxx 的方式命名，数据类型必须是 unsigned tinyint （ 1 表示是，0 表示否）。数据库字段使用 is_xxx 命名是为了明确此字段的意义和取值范围，但是 POJO 类中是不允许加上 is 前缀的。在使用 MyBatis 时需要在```<resultMap>```设置中两者的映射关系，在使用 MyBatis Plus 的过程中就必须要在 DO 类的属性中加上 @TableField 注解，并通过 value 属性设置数据库字段名。

2. 小数类型为 decimal ，禁止使用 float 和 double 类型，因为后两者存在精度损失的问题。

3. 表中必备的5个字段：id , create_time , update_time , create_by , update_by 。其中 id 是主键，类型为 bigint unsigned ， create_time 和 update_time 必须为 datetime 类型。

4. 表名必须遵循 " 模块名_表名 " 的命名规范，表名以及字段名必须有注释且为小写，不同单词使用下划线分隔开。

5. 数值型的字段在确保不会有负数时，必须使用 unsigned 进行修饰

6. varchar 字段的长度不能超过 5000 个字符，如果长度大于此值，就需要定义该字段为 text ，独立出来一张表，用主键进行对应，避免影响其它字段的索引效率。

7. 使用 count(*) 来统计表中的总行数，而不是 count(1) 或者 count(列名) 等

8. 使用 ISNULL() 函数来判断某个字段是否是为 NULL

9. 进行分页查询的逻辑时，如果 count 为 0 就应该直接返回，避免执行后面的分页语句。

10. 禁止使用外键和级联，禁止使用存储过程

11. 删除、修改数据之前必须要先进行查询，确认后才能够删除数据

12. 数据库名应该遵循 "应用名称-环境" 的规范，字符集设置为 utf8mb4 ，排序规则设置为 utf8mb4_general_ci 。示例：idomp-bjzjc-dev ，idomp-bjzjc-test ，idomp-bjzjc-prod 

13. 对于数据表中有内置记录的，比如菜单表、字典表等，必须要在项目的 README.md 文档中明确列出

    

## SpringBoot

springboot 相关的使用，某种场景，就用某种固定的方法，而不是每个人一种方法，增加复杂度

## Spring Web MVC

controller层的接口，url请求地址，方式该如何写，也应该是一个固定的写法。VO、DO、Param等

## MyBatis

mybatis 中的mapper xml 中到底应该怎么写，也是非常值得讨论的事情。```<result/>```标签该怎么写，到底要不要指定jdbcType的值，需不需要parameterType参数等等

## MyBatis Plus

通过MyBatis Plus来使用

## HTTP请求

发送http请求到底应该指定一个怎么样的规范，应该使用httpclient、okhttp、httpurlconnection还是restTemplate等

## 定时任务

任何系统中都少补了定时任务，应该怎么写呢？是直接使用线程池做定时任务还是Spring Task来做为定时任务呢？还是使用quartz或者是XXL-JOB这种分布式定时任务，具体使用规范是什么？

## Hutool

使用了Hutool后，不需要再在项目中去用一些复制粘贴的工具类了，非常的方便。非常常见的工具类哦

## Redis

springboot整合redis，使用默认的StringRedisTemplate还是自己自定义一个RedisTemplate呢？然后再自己封装一个工具类，这些都值得商讨

## Lombok

通过Lombok相关的注解，就能够减少很多样板室的代码，可以让代码更简洁。常用的注解需要掌握！

## RabbitMQ

springboot整合rabbitmq，如何接受发送消息，用哪种方式等，注解还是java配置类

## 编程规约

编程规约

## IDEA 插件

善用IDEA插件，能够提升工作效率

## 参考文档

[程序员你为什么这么累](https://xwjie.github.io/rule/)

[阿里巴巴Java开发手册（华山版）](https://github.com/alibaba/p3c)

[cdk8s-team-style](https://github.com/cdk8s/cdk8s-team-style)

